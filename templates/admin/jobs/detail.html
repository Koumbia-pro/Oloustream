{% extends "admin/admin_base.html" %}
{% block title %}Détails - {{ offer.title }}{% endblock %}

{% block content %}
<div class="container-fluid">
  <div class="d-flex align-items-center justify-content-between mb-4">
    <div>
      <h3 class="mb-1">{{ offer.title }}</h3>
      <div class="text-muted">
        {{ offer.get_offer_type_display }}
        {% if offer.location %} • {{ offer.location }}{% endif %}
        {% if offer.department %} • {{ offer.department }}{% endif %}
      </div>
    </div>

    <div class="d-flex gap-2">
      <a href="{% url 'services_app:admin_jobs_applications' offer.pk %}" class="btn btn-outline-dark">
        <i class="ph ph-users me-1"></i> Candidatures ({{ offer.applications.count }})
      </a>
      <a href="{% url 'services_app:admin_jobs_edit' offer.pk %}" class="btn btn-outline-primary">
        <i class="ph ph-pencil-simple me-1"></i> Modifier
      </a>
      <a href="{% url 'services_app:admin_jobs_delete' offer.pk %}" class="btn btn-danger">
        <i class="ph ph-trash me-1"></i> Supprimer
      </a>
    </div>
  </div>

  <div class="row g-3">
    <div class="col-12 col-lg-8">
      <div class="card border-0 shadow-sm">
        <div class="card-body">
          <h5 class="mb-3">Description</h5>
          <div class="text-muted">{{ offer.description|linebreaksbr }}</div>

          {% if offer.responsibilities %}
            <hr>
            <h5 class="mb-3">Missions</h5>
            <div class="text-muted">{{ offer.responsibilities|linebreaksbr }}</div>
          {% endif %}

          {% if offer.requirements %}
            <hr>
            <h5 class="mb-3">Profil recherché</h5>
            <div class="text-muted">{{ offer.requirements|linebreaksbr }}</div>
          {% endif %}

          {% if offer.benefits %}
            <hr>
            <h5 class="mb-3">Avantages</h5>
            <div class="text-muted">{{ offer.benefits|linebreaksbr }}</div>
          {% endif %}
        </div>
      </div>
    </div>

    <div class="col-12 col-lg-4">
      <div class="card border-0 shadow-sm">
        <div class="card-body">
          <h5 class="mb-3">Infos rapides</h5>

          <ul class="list-unstyled mb-0">
            <li class="mb-2"><strong>Statut:</strong> {{ offer.get_status_display }}</li>
            <li class="mb-2"><strong>Contrat:</strong> {{ offer.get_contract_type_display|default:"—" }}</li>
            <li class="mb-2"><strong>Niveau:</strong> {{ offer.get_level_display|default:"—" }}</li>
            <li class="mb-2"><strong>Date limite:</strong> {% if offer.deadline %}{{ offer.deadline }}{% else %}—{% endif %}</li>
            <li class="mb-2"><strong>Créée le:</strong> {{ offer.created_at|date:"d/m/Y H:i" }}</li>
          </ul>
        </div>
      </div>

      <div class="card border-0 shadow-sm mt-3">
        <div class="card-body">
          <h5 class="mb-3">Affiche</h5>
          {% if offer.poster %}
            <img src="{{ offer.poster.url }}" class="img-fluid rounded border" alt="{{ offer.title }}">
          {% else %}
            <div class="text-muted">Aucune affiche.</div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}